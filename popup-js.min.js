class PopupJS{popups;constructor(){this.popups=new Map}getById(id){return this.popups.get(id)}getAll(){return Array.from(this.popups.values())}destroy(id){if(this.popups.has(id)){let popup;this.getById(id).delete(),this.popups.delete(id)}else console.warn("No popup found for id:",id)}clearAll(){for(const key of this.popups.keys()){let popup;this.getById(key).delete()}this.popups=new Map}count(){return this.popups.size}create(options){let popup={id:void 0,width:void 0,height:void 0,radius:void 0,shadow_show:void 0,color_main:void 0,color_secondary:void 0,draggable:void 0,modal_show:void 0,modal_close:void 0,position:void 0,anchor_target:void 0,anchor_side:void 0,title_show:void 0,title_text:void 0,content_text:void 0,buttonclose_show:void 0,buttonvalidate_show:void 0,buttonvalidate_text:void 0,buttonvalidate_callback:void 0,buttoncancel_show:void 0,buttoncancel_text:void 0,buttoncancel_callback:void 0,html:void 0,style:void 0,open:void 0,refresh:void 0,validate:void 0,cancel:void 0,delete:void 0};return void 0!==options&&void 0!==options.id?popup.id=options.id:popup.id="popup-"+Math.random().toString(16).slice(2),void 0!==options&&void 0!==options.anchor_target?popup.anchor_target=options.anchor_target:popup.anchor_target=null,void 0!==options&&void 0!==options.anchor_side?popup.anchor_side=options.anchor_side:popup.anchor_side=null,void 0!==options&&void 0!==options.color_main?popup.color_main=options.color_main:popup.color_main="#888",void 0!==options&&void 0!==options.color_secondary?popup.color_secondary=options.color_secondary:popup.color_secondary="#FFF",void 0!==options&&void 0!==options.width?popup.width=options.width:popup.width=400,void 0!==options&&void 0!==options.height?popup.height=options.height:popup.height=150,void 0!==options&&void 0!==options.radius?popup.radius=options.radius:popup.radius=10,void 0!==options&&void 0!==options.modal_close?popup.modal_close=options.modal_close:popup.modal_close=!1,void 0!==options&&void 0!==options.buttonclose_show?popup.buttonclose_show=options.buttonclose_show:popup.buttonclose_show=!0,void 0!==options&&void 0!==options.draggable?popup.draggable=options.draggable:popup.draggable=!1,void 0!==options&&void 0!==options.modal_show?popup.modal_show=options.modal_show:popup.modal_show=!1,void 0!==options&&void 0!==options.title_show?popup.title_show=options.title_show:popup.title_show=!0,void 0!==options&&void 0!==options.title_text?popup.title_text=options.title_text:popup.title_text="Title",void 0!==options&&void 0!==options.content_text?popup.content_text=options.content_text:popup.content_text="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",void 0!==options&&void 0!==options.buttonvalidate_show?popup.buttonvalidate_show=options.buttonvalidate_show:popup.buttonvalidate_show=!1,void 0!==options&&void 0!==options.buttonvalidate_text?popup.buttonvalidate_text=options.buttonvalidate_text:popup.buttonvalidate_text="Ok",void 0!==options&&void 0!==options.shadow_show?popup.shadow_show=options.shadow_show:popup.shadow_show=!0,void 0!==options&&void 0!==options.buttonvalidate_callback?"function"==typeof options.buttonvalidate_callback?popup.buttonvalidate_callback=options.buttonvalidate_callback:(console.warn("Option buttonvalidate_callback invalid"),popup.buttonvalidate_callback=null):popup.buttonvalidate_callback=null,void 0!==options&&void 0!==options.buttoncancel_show?popup.buttoncancel_show=options.buttoncancel_show:popup.buttoncancel_show=!1,void 0!==options&&void 0!==options.buttoncancel_text?popup.buttoncancel_text=options.buttoncancel_text:popup.buttoncancel_text="Cancel",void 0!==options&&void 0!==options.cancel_callback?"function"==typeof options.cancel_callback?popup.cancel_callback=options.cancel_callback:(console.warn("Option cancel_callback invalid"),popup.cancel_callback=null):popup.cancel_callback=null,void 0!==options&&void 0!==options.position?popup.position=options.position:popup.position="center",Object.defineProperty(popup,"html",{enumerable:!1,writable:!0}),popup.refresh=function(){this.style=document.querySelector("head>style."+this.id),null===this.style&&(this.style=document.createElement("style")),this.stylemobile=document.querySelector("head>style."+this.id+".mobile"),null===this.stylemobile&&(this.stylemobile=document.createElement("style")),this.html=document.querySelector("#"+this.id),null===this.html&&(this.html=document.createElement("div"));let modal=document.querySelector("#"+this.id+">.popup-modal");null===modal&&(modal=document.createElement("div")),this.modal_close&&this.buttonclose_show?modal.addEventListener("click",this.close):modal.removeEventListener("click",this.close);let popup=document.querySelector("#"+this.id+">.popup");null===popup&&(popup=document.createElement("div"));let header=document.querySelector("#"+this.id+">.popup>.popup-header");null===header&&(header=document.createElement("div"));let title=document.querySelector("#"+this.id+">.popup>.popup-header>.popup-title");null===title&&(title=document.createElement("div"));let close_button=document.querySelector("#"+this.id+">.popup>.popup-header>.popup-close");null===close_button&&(close_button=document.createElement("div"),this.title_show&&this.buttonclose_show&&close_button.addEventListener("click",this.close));let content=document.querySelector("#"+this.id+">.popup>.popup-content");null===content&&(content=document.createElement("div"));let footer=document.querySelector("#"+this.id+">.popup>.popup-footer");null===footer&&(footer=document.createElement("div"));let validate_button=document.querySelector("#"+this.id+">.popup>.popup-footer>.popup-validate");null===validate_button&&(validate_button=document.createElement("button"),this.buttonvalidate_show&&validate_button.addEventListener("click",this.validate));let cancel_button=document.querySelector("#"+this.id+">.popup>.popup-footer>.popup-cancel");if(null===cancel_button&&(cancel_button=document.createElement("button"),this.buttoncancel_show&&cancel_button.addEventListener("click",this.cancel)),this.html.appendChild(modal),this.html.appendChild(popup),popup.appendChild(header),this.title_show?header.appendChild(title):header.hasChildNodes(title)&&title.remove(),this.buttonclose_show?header.appendChild(close_button):header.hasChildNodes(close_button)&&close_button.remove(),popup.appendChild(content),popup.appendChild(footer),this.buttoncancel_show?footer.appendChild(cancel_button):popup.hasChildNodes(cancel_button)&&cancel_button.remove(),this.buttonvalidate_show?footer.appendChild(validate_button):popup.hasChildNodes(validate_button)&&validate_button.remove(),this.style.hasAttribute("type")||this.style.setAttribute("type","text/css"),this.style.classList.contains(this.id)||this.style.setAttribute("class",this.id),this.html.hasAttribute("id")||this.html.setAttribute("id",this.id),this.html.classList.contains("popup-html "+this.id)||this.html.setAttribute("class","popup-html "+this.id),this.html.hasAttribute("style")||this.html.setAttribute("style","display:none;"),modal.classList.contains("popup-modal")||modal.setAttribute("class","popup-modal"),this.modal_show?modal.classList.contains("modal-hidden")&&modal.classList.remove("modal-hidden"):modal.classList.contains("modal-hidden")||modal.classList.add("modal-hidden"),popup.classList.contains("popup")||popup.setAttribute("class","popup"),"center"===this.position?popup.classList.contains("popup-center")||popup.classList.add("popup-center"):popup.classList.contains("popup-center")&&popup.classList.remove("popup-center"),"fullscreen"===this.position?popup.classList.contains("popup-fullscreen")||popup.classList.add("popup-fullscreen"):popup.classList.contains("popup-fullscreen")&&popup.classList.remove("popup-fullscreen"),"anchor"===this.position){popup.classList.contains("popup-anchor")||popup.classList.add("popup-anchor");let target=document.querySelector(this.anchor_target);if(null===target)return console.error("nullanchor_target not found"),null;let target_coord=target.getBoundingClientRect(),target_position=null,anchor_side_auto=null;if("auto"===this.anchor_side||null===this.anchor_side){let target_center_coord={x:target_coord.left+target_coord.width/2,y:target_coord.top+target_coord.height/2};target_center_coord.y>=0&&target_center_coord.y<=window.innerHeight/3?target_position="top":target_center_coord.y>window.innerHeight/3&&target_center_coord.y<window.innerHeight/3*2?target_position="center":target_center_coord.y>=window.innerHeight/3*2&&target_center_coord.y<=window.innerHeight&&(target_position="bottom"),target_center_coord.x>=0&&target_center_coord.x<=window.innerWidth/3?target_position+="left":target_center_coord.x>window.innerWidth/3&&target_center_coord.x<window.innerWidth/3*2?target_position+="center":target_center_coord.x>=window.innerWidth/3*2&&target_center_coord.x<=window.innerWidth&&(target_position+="right"),anchor_side_auto="topleft"==target_position?"bottomright":"topcenter"==target_position?"bottom":"topright"==target_position?"bottomleft":"centerleft"==target_position?"right":"centercenter"==target_position?"top":"centerright"==target_position?"left":"bottomleft"==target_position?"topright":"bottomcenter"==target_position?"top":"bottomright"==target_position?"topleft":"top"}"top"===this.anchor_side||null===anchor_side_auto?(popup.style.top=target_coord.top-this.height+"px",popup.style.left=target_coord.left+target_coord.width/2-this.width/2+"px"):"bottom"===this.anchor_side||"bottom"===anchor_side_auto?(popup.style.top=target_coord.top+target_coord.height+"px",popup.style.left=target_coord.left+target_coord.width/2-this.width/2+"px"):"left"===this.anchor_side||"left"===anchor_side_auto?(popup.style.top=target_coord.top+target_coord.height/2-this.height/2+"px",popup.style.left=target_coord.left-this.width+"px"):"right"===this.anchor_side||"right"===anchor_side_auto?(popup.style.top=target_coord.top+target_coord.height/2-this.height/2+"px",popup.style.left=target_coord.left+target_coord.width+"px"):"topleft"===this.anchor_side||"topleft"===anchor_side_auto?(popup.style.top=target_coord.top-this.height+"px",popup.style.left=target_coord.left-this.width+"px"):"topright"===this.anchor_side||"topright"===anchor_side_auto?(popup.style.top=target_coord.top-this.height+"px",popup.style.left=target_coord.left+target_coord.width+"px"):"bottomleft"===this.anchor_side||"bottomleft"===anchor_side_auto?(popup.style.top=target_coord.top+target_coord.height+"px",popup.style.left=target_coord.left-this.width+"px"):"bottomright"===this.anchor_side||"bottomright"===anchor_side_auto?(popup.style.top=target_coord.top+target_coord.height+"px",popup.style.left=target_coord.left+target_coord.width+"px"):"center"===this.anchor_side&&(popup.style.top=target_coord.top+target_coord.height/2-this.height/2+"px",popup.style.left=target_coord.left+target_coord.width/2-this.width/2+"px")}else popup.classList.contains("popup-anchor")&&(popup.classList.remove("popup-anchor"),popup.style.top=null,popup.style.left=null);"top"===this.position?popup.classList.contains("popup-top")||popup.classList.add("popup-top"):popup.classList.contains("popup-top")&&popup.classList.remove("popup-top"),"bottom"===this.position?popup.classList.contains("popup-bottom")||popup.classList.add("popup-bottom"):popup.classList.contains("popup-bottom")&&popup.classList.remove("popup-bottom"),"left"===this.position?popup.classList.contains("popup-left")||popup.classList.add("popup-left"):popup.classList.contains("popup-left")&&popup.classList.remove("popup-left"),"right"===this.position?popup.classList.contains("popup-right")||popup.classList.add("popup-right"):popup.classList.contains("popup-right")&&popup.classList.remove("popup-right"),"topleft"===this.position?popup.classList.contains("popup-topleft")||popup.classList.add("popup-topleft"):popup.classList.contains("popup-topleft")&&popup.classList.remove("popup-topleft"),"topright"===this.position?popup.classList.contains("popup-topright")||popup.classList.add("popup-topright"):popup.classList.contains("popup-topright")&&popup.classList.remove("popup-topright"),"bottomleft"===this.position?popup.classList.contains("popup-bottomleft")||popup.classList.add("popup-bottomleft"):popup.classList.contains("popup-bottomleft")&&popup.classList.remove("popup-bottomleft"),"bottomright"===this.position?popup.classList.contains("popup-bottomright")||popup.classList.add("popup-bottomright"):popup.classList.contains("popup-bottomright")&&popup.classList.remove("popup-bottomright"),header.classList.contains("popup-header")||header.setAttribute("class","popup-header"),title.classList.contains("popup-title")||title.setAttribute("class","popup-title"),content.classList.contains("popup-content")||content.setAttribute("class","popup-content"),footer.classList.contains("popup-footer")||footer.setAttribute("class","popup-footer"),close_button.classList.contains("popup-close")||close_button.setAttribute("class","popup-close"),validate_button.classList.contains("popup-button")||validate_button.classList.add("popup-button"),validate_button.classList.contains("popup-validate")||validate_button.classList.add("popup-validate"),cancel_button.classList.contains("popup-button")||cancel_button.classList.add("popup-button"),cancel_button.classList.contains("popup-cancel")||cancel_button.classList.add("popup-cancel"),title.innerHTML!=this.title_text&&(title.innerHTML=this.title_text),content.innerHTML!=this.content_text&&(content.innerHTML=this.content_text),"x"!=close_button.innerText&&(close_button.innerText="x");let shadow=this.shadow_show?"0 0 15px 5px rgb(0 0 0 / 30%)":"none",radius=Number.isInteger(this.radius)?this.radius+"px":this.radius,newstyle_text="#"+this.id+".popup-html{position:fixed;z-index:1050;left:0;top:0;}#"+this.id+".popup-html.popup-hidden{display:none;}#"+this.id+">.popup-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgb(0 0 0 / 50%);}#"+this.id+">.popup-modal.modal-hidden{display:none;}#"+this.id+">.popup{z-index:2;width:"+this.width+"px;border-radius:"+radius+";background:#FFF;box-shadow:"+shadow+";height:"+this.height+"px;display:flex;flex-direction:column;flex-wrap:nowrap;align-content:center;justify-content:space-between;align-items:center;}#"+this.id+">.popup.popup-center{position:fixed;bottom:calc(50% - "+this.height+"px/2);left:calc(50% - "+this.width+"px/2);}#"+this.id+">.popup.popup-top{position:fixed;top:10px;left:calc(50% - "+this.width+"px/2);}#"+this.id+">.popup.popup-bottom{position:fixed;bottom:10px;left:calc(50% - "+this.width+"px/2);}#"+this.id+">.popup.popup-left{position:fixed;top:calc(50% - "+this.height+"px/2);left:10px;}#"+this.id+">.popup.popup-right{position:fixed;top:calc(50% - "+this.height+"px/2);right:10px;}#"+this.id+">.popup.popup-topleft{position:fixed;top:10px;left:10px;}#"+this.id+">.popup.popup-topright{position:fixed;top:10px;right:10px;}#"+this.id+">.popup.popup-bottomleft{position:fixed;bottom:10px;left:10px;}#"+this.id+">.popup.popup-bottomright{position:fixed;bottom:10px;right:10px;}#"+this.id+">.popup.popup-fullscreen{position:fixed;top:10px;left:10px;width:calc(100vw - 10px * 2);height:calc(100vh - 10px * 2);}#"+this.id+">.popup.popup-anchor{position:fixed;top:0;left:0;}#"+this.id+">.popup>.popup-header{display:flex;flex-direction:row;flex-wrap:nowrap;align-content:center;justify-content:flex-end;align-items:flex-start;color:"+this.color_secondary+";width:100%;border-top-left-radius:inherit;border-top-right-radius:inherit;background:"+this.color_main+";min-height:40px;}#"+this.id+">.popup>.popup-header>.popup-title{width:100%;color:"+this.color_secondary+";padding-left:15px;padding-top:5px;padding-bottom:5px;font-size:20px;font-weight:bold;border-top-left-radius:inherit;}#"+this.id+">.popup>.popup-header>.popup-close{font-size:22px;font-weight:600;width:40px;padding-bottom:4px;height:inherit;border-top-right-radius:inherit;text-align:center;cursor:pointer;}#"+this.id+">.popup>.popup-content{width: 100%;padding:10px;max-height:calc("+this.height+"px);overflow-y:auto;border-radius:inherit;color:#000;}#"+this.id+">.popup>.popup-footer{display:flex;flex-direction:row;justify-content:space-evenly;flex-wrap:wrap;align-items:center;align-content:center;width:100%;border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;background:"+this.color_main+";min-height:40px;}#"+this.id+">.popup>.popup-footer>.popup-button{min-width:50px;background:transparent;color:"+this.color_secondary+";padding:2px 10px;margin-top:5px;margin-bottom:5px;border-style:solid;border-width:2px;border-color:"+this.color_secondary+";border-radius:5px;font-size:16px;font-weight:bold;}#"+this.id+">.popup>.popup-footer>.popup-button.popup-cancel.popup-hidden{display:none;}.popup-dragger{cursor:grab;cursor:-webkit-grab;}.popup-dragged{cursor:grabbing;cursor:-webkit-grabbing;}@media all and (min-width:0px) and (max-width:"+this.width+"px){#"+this.id+">.popup.popup-center{width:100vw;left:0;}#"+this.id+">.popup.popup-top{width:100vw;left:0;}#"+this.id+">.popup.popup-bottom{width:100vw;left:0;}#"+this.id+">.popup.popup-left{width:100vw;left:0;}#"+this.id+">.popup.popup-right{width:100vw;right:0;}#"+this.id+">.popup.popup-topleft{width:100vw;left:0;}#"+this.id+">.popup.popup-topright{width:100vw;right:0;}#"+this.id+">.popup.popup-bottomleft{width:100vw;left:0;}#"+this.id+">.popup.popup-bottomright{width:100vw;right:0;}#"+this.id+">.popup.popup-fullscreen{width:100vw;left:0;}}@media all and (min-height:0px) and (max-height:"+this.height+"px){#"+this.id+">.popup.popup-center{height:100vh;top:0;}#"+this.id+">.popup.popup-top{height:100vh;top:0;}#"+this.id+">.popup.popup-left{height:100vh;top:0;}#"+this.id+">.popup.popup-right{height:100vh;top:0;}#"+this.id+">.popup.popup-topleft{height:100vh;top:0;}#"+this.id+">.popup.popup-topright{height:100vh;top:0;}#"+this.id+">.popup.popup-fullscreen{height:100vh;top:0;}#"+this.id+">.popup.popup-bottomleft{height:100vh;bottom:0;}#"+this.id+">.popup.popup-bottomright{height:100vh;bottom:0;}#"+this.id+">.popup.popup-bottom{height:100vh;bottom:0;}}";if(this.style.innerHTML!=newstyle_text&&(this.style.innerHTML=newstyle_text),validate_button.innerText!=this.buttonvalidate_text&&(validate_button.innerText=this.buttonvalidate_text),cancel_button.innerText!=this.buttoncancel_text&&(cancel_button.innerText=this.buttoncancel_text),this.draggable){var pos1=0,pos2=0,pos3=0,pos4=0;let dragMouseDown=function(e){updateStyle(!0,header),(e=e||window.event).preventDefault(),pos3=e.clientX,pos4=e.clientY,document.onmouseup=closeDragElement,document.onmousemove=elementDrag},elementDrag=function(e){(e=e||window.event).preventDefault(),pos1=pos3-e.clientX,pos2=pos4-e.clientY,pos3=e.clientX,pos4=e.clientY,popup.style.top=popup.offsetTop-pos2+"px",popup.style.left=popup.offsetLeft-pos1+"px"},closeDragElement=function(){updateStyle(!1,header),document.onmouseup=null,document.onmousemove=null},updateStyle=function(isDragging,header){isDragging?(header.classList.contains("popup-dragger")&&header.classList.remove("popup-dragger"),header.classList.contains("popup-dragged")||header.classList.add("popup-dragged")):(header.classList.contains("popup-dragged")&&header.classList.remove("popup-dragged"),header.classList.contains("popup-dragger")||header.classList.add("popup-dragger"))};header.onmousedown=dragMouseDown}else header.onmousedown=null,"anchor"!=this.position&&(popup.style.top=null,popup.style.left=null)},popup.add=function(){let popup=document.getElementById(this.id);null!==popup||(this.delete(),this.refresh(),document.head.appendChild(this.style),document.body.appendChild(this.html),popup=document.getElementById(this.id),null!==popup)||console.error("impossible à ajouter: ",this.id)},popup.open=function(){let popup=document.getElementById(this.id);null!==popup||(this.delete(),this.refresh(),document.head.appendChild(this.style),document.body.appendChild(this.html),popup=document.getElementById(this.id),null!==popup)?popup.style.display="initial":console.error("popup impossible à ouvrir: ",this.id)},popup.close=function(e){let id=void 0!==e?e.target.closest('[id^="popup-"].popup-html').getAttribute("id"):this.id,popup=document.getElementById(id);null!==popup?popup.style.display="none":console.error("popup not found: ",id)},popup.validate=function(e){let result=null,id=void 0!==e?e.target.closest('[id^="popup-"].popup-html').getAttribute("id"):this.id;if("function"==typeof popup.buttonvalidate_callback){let exec;result=(0,popup.buttonvalidate_callback)(e)}let existing_popup_elements=document.querySelectorAll("."+id);if(existing_popup_elements.length>0)for(let i=0;i<existing_popup_elements.length;i++)existing_popup_elements[i].remove();return result},popup.cancel=function(e){let result=null,id=void 0!==e?e.target.closest('[id^="popup-"].popup-html').getAttribute("id"):this.id;if("function"==typeof popup.buttoncancel_callback){let exec;result=(0,popup.buttoncancel_callback)(e)}let existing_popup_elements=document.querySelectorAll("."+id);if(existing_popup_elements.length>0)for(let i=0;i<existing_popup_elements.length;i++)existing_popup_elements[i].remove();return result},popup.delete=function(){let existing_popup_elements=document.querySelectorAll("."+this.id);if(existing_popup_elements.length>0)for(let i=0;i<existing_popup_elements.length;i++)existing_popup_elements[i].remove()},this.popups.set(popup.id,popup),popup.add(),popup}}